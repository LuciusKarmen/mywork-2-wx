"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("uni-dateformat")+e.resolveComponent("uni-icons")+e.resolveComponent("uni-popup")+e.resolveComponent("uni-rate"))()}Math||((()=>"../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js")+(()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js")+(()=>"../../uni_modules/uni-rate/components/uni-rate/uni-rate.js"))();const o=e.defineComponent({__name:"preview",setup(o){const l=e.index.getStorageSync("storgclassList");console.log(l);const a=e.ref([]),u=e.ref([]);a.value=l.map((e=>({...e,picurl:e.smallPicurl.replace("_small.webp",".jpg")}))),console.log(a.value);const n=e.ref(!0),t=e.ref(null),s=e.ref(null),v=e.ref(5),c=()=>{n.value=!n.value},i=()=>{t.value.open()},p=()=>{var e;(null==(e=s.value)?void 0:e.open)&&s.value.open()},r=()=>{var e;(null==(e=s.value)?void 0:e.close)&&s.value.close()},m=()=>{t.value.close()},d=(e=0)=>{console.log("评分:",e),r()},f=()=>{e.index.getImageInfo({src:_.value.picurl,success:o=>{e.index.saveImageToPhotosAlbum({filePath:o.path,success:()=>{console.log("下载成功")}})}})},g=e.ref([]),h=e.ref(),_=e.ref();e.onLoad((e=>{console.log(e),g.value=e.id;let o=a.value.findIndex((e=>e._id==g.value));console.log(o),h.value=o,_.value=a.value[h.value],console.log(_.value),u.value.push(_.value<=0?a.value.length-1:_.value-1,_.value,_.value>=a.value.length-1?0:_.value+1),u.value=[...new Set(u.value)]}));const y=e=>{h.value=e.detail.current,_.value=a.value[h.value],console.log(e)};return(o,l)=>e.e({a:e.f(a.value,((e,o,l)=>({a:e.picurl}))),b:e.o(c),c:h.value,d:e.o(y),e:n.value},n.value?{f:e.t(h.value+1),g:e.t(a.value.length),h:e.p({date:new Date,format:"hh:mm"}),i:e.p({date:new Date,format:"MM月dd日"}),j:e.p({type:"info",size:"35"}),k:e.o(i),l:e.p({type:"heart",size:"35"}),m:e.o(p),n:e.p({type:"download",size:"35"}),o:e.o(f)}:{},{p:e.p({type:"close",size:"30"}),q:e.o(m),r:e.t(_.value.classid),s:e.t(_.value.nickname),t:e.t(_.value.score),v:e.t(_.value.description),w:e.f(_.value.tabs,((o,l,a)=>({a:e.t(o)}))),x:e.sr(t,"69cc8a01-5",{k:"info"}),y:e.p({type:"bottom"}),z:e.p({type:"close",size:"30"}),A:e.o(r),B:e.o((()=>{})),C:e.o((e=>v.value=e)),D:e.p({modelValue:v.value}),E:e.t(v.value),F:e.o(d),G:e.sr(s,"69cc8a01-7",{k:"p"})})}}),l=e._export_sfc(o,[["__scopeId","data-v-69cc8a01"]]);wx.createPage(l);
